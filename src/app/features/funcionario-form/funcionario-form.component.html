<div class="funcionario-form-container"> 
  <div class="header"> 
    <button class="btn btn-outline-secondary" (click)="goBack()"> 
      <i class="fas fa-arrow-left"></i> Volver 
    </button> 
    <h2>{{ isEditMode ? 'Editar' : 'Crear' }} Funcionario</h2> 
  </div> 
  
  <div class="card"> 
    <div class="card-body"> 
      <form [formGroup]="funcionarioForm" (ngSubmit)="onSubmit()"> 
        <!-- Alerta de éxito --> 
        <div *ngIf="successMessage" class="alert alert-success"> 
          {{ successMessage }} 
        </div> 
        
        <!-- Alerta de error --> 
        <div *ngIf="errorMessage" class="alert alert-danger"> 
          {{ errorMessage }} 
        </div> 
        
        <div class="row"> 
          <!-- Tipo de Documento -->
          <div class="col-md-6 form-group">
            <label for="tipoDocumento">Tipo de Documento</label>
            <select
              id="tipoDocumento"
              formControlName="tipoDocumento"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['tipoDocumento'].errors }"
            >
              <option value="">Seleccione tipo de documento</option>
              <option value="CC">Cédula de Ciudadanía</option>
              <option value="CE">Cédula de Extranjería</option>
              <option value="TI">Tarjeta de Identidad</option>
              <option value="PP">Pasaporte</option>
            </select>
            <div *ngIf="submitted && f['tipoDocumento'].errors" class="invalid-feedback">
              <div *ngIf="f['tipoDocumento'].errors['required']">El tipo de documento es obligatorio</div>
            </div>
          </div>
          
          <!-- Identificación -->
          <div class="col-md-6 form-group">
            <label for="identificacion">Número de Identificación</label>
            <input
              type="text"
              id="identificacion"
              formControlName="identificacion"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['identificacion'].errors }"
            />
            <div *ngIf="submitted && f['identificacion'].errors" class="invalid-feedback">
              <div *ngIf="f['identificacion'].errors['required']">El número de identificación es obligatorio</div>
              <div *ngIf="f['identificacion'].errors['pattern']">El número de identificación debe contener solo números</div>
            </div>
          </div>
        </div>
        
        <div class="row"> 
          <!-- Nombre --> 
          <div class="col-md-6 form-group"> 
            <label for="nombreFuncionario">Nombre</label> 
            <input 
              type="text" 
              id="nombreFuncionario" 
              formControlName="nombreFuncionario" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['nombreFuncionario'].errors }" 
            /> 
            <div *ngIf="submitted && f['nombreFuncionario'].errors" class="invalid-feedback"> 
              <div *ngIf="f['nombreFuncionario'].errors['required']">El nombre es obligatorio</div> 
            </div> 
          </div> 
          
          <!-- Apellido --> 
          <div class="col-md-6 form-group"> 
            <label for="apellidoFuncionario">Apellido</label> 
            <input 
              type="text" 
              id="apellidoFuncionario" 
              formControlName="apellidoFuncionario" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['apellidoFuncionario'].errors }" 
            /> 
            <div *ngIf="submitted && f['apellidoFuncionario'].errors" class="invalid-feedback"> 
              <div *ngIf="f['apellidoFuncionario'].errors['required']">El apellido es obligatorio</div> 
            </div> 
          </div> 
        </div> 
        
        <div class="row"> 
          <!-- Fecha de Nacimiento -->
          <div class="col-md-6 form-group">
            <label for="fechaNacimiento">Fecha de Nacimiento</label>
            <input
              type="date"
              id="fechaNacimiento"
              formControlName="fechaNacimiento"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['fechaNacimiento'].errors }"
            />
            <div *ngIf="submitted && f['fechaNacimiento'].errors" class="invalid-feedback">
              <div *ngIf="f['fechaNacimiento'].errors['required']">La fecha de nacimiento es obligatoria</div>
            </div>
          </div>
          
          <!-- Género -->
          <div class="col-md-6 form-group">
            <label for="genero">Género</label>
            <select
              id="genero"
              formControlName="genero"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['genero'].errors }"
            >
              <option value="">Seleccione género</option>
              <option value="Masculino">Masculino</option>
              <option value="Femenino">Femenino</option>
              <option value="Otro">Otro</option>
            </select>
            <div *ngIf="submitted && f['genero'].errors" class="invalid-feedback">
              <div *ngIf="f['genero'].errors['required']">El género es obligatorio</div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <!-- Estado Civil -->
          <div class="col-md-6 form-group">
            <label for="estadoCivil">Estado Civil</label>
            <select
              id="estadoCivil"
              formControlName="estadoCivil"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['estadoCivil'].errors }"
            >
              <option value="">Seleccione estado civil</option>
              <option value="Soltero">Soltero/a</option>
              <option value="Casado">Casado/a</option>
              <option value="Divorciado">Divorciado/a</option>
              <option value="Viudo">Viudo/a</option>
              <option value="UnionLibre">Unión Libre</option>
            </select>
            <div *ngIf="submitted && f['estadoCivil'].errors" class="invalid-feedback">
              <div *ngIf="f['estadoCivil'].errors['required']">El estado civil es obligatorio</div>
            </div>
          </div>
          
          <!-- Correo --> 
          <div class="col-md-6 form-group"> 
            <label for="email">Correo Electrónico</label> 
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" 
            /> 
            <div *ngIf="submitted && f['email'].errors" class="invalid-feedback"> 
              <div *ngIf="f['email'].errors['required']">El correo es obligatorio</div> 
              <div *ngIf="f['email'].errors['email']">Ingrese un correo electrónico válido</div> 
            </div> 
          </div> 
        </div> 
        
        <div class="row"> 
          <!-- Celular --> 
          <div class="col-md-6 form-group"> 
            <label for="celular">Celular</label> 
            <input 
              type="text" 
              id="celular" 
              formControlName="celular" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['celular'].errors }" 
            /> 
            <div *ngIf="submitted && f['celular'].errors" class="invalid-feedback"> 
              <div *ngIf="f['celular'].errors['pattern']">El celular debe contener solo números</div> 
            </div> 
          </div> 
          
          <!-- Cargo --> 
          <div class="col-md-6 form-group"> 
            <label for="cargo">Cargo</label> 
            <input 
              type="text" 
              id="cargo" 
              formControlName="cargo" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['cargo'].errors }" 
            /> 
            <div *ngIf="submitted && f['cargo'].errors" class="invalid-feedback"> 
              <div *ngIf="f['cargo'].errors['required']">El cargo es obligatorio</div> 
            </div> 
          </div> 
        </div> 
        
        <div class="row">
          <!-- Dirección -->
          <div class="col-md-6 form-group"> 
            <label for="direccion">Dirección</label> 
            <textarea 
              id="direccion" 
              formControlName="direccion" 
              class="form-control" 
              rows="3"
              style="resize: none;"
            ></textarea> 
          </div>
          
          <!-- Estado -->
          <div class="col-md-6 form-group">
            <label for="estado">Estado</label>
            <select
              id="estado"
              formControlName="estado"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['estado'].errors }"
            >
              <option value="">Seleccione estado</option>
              <option value="Activo">Activo</option>
              <option value="Inactivo">Inactivo</option>
            </select>
            <div *ngIf="submitted && f['estado'].errors" class="invalid-feedback">
              <div *ngIf="f['estado'].errors['required']">El estado es obligatorio</div>
            </div>
          </div>
        </div>
        
        <div class="form-actions"> 
          <button type="submit" class="btn btn-primary" [disabled]="loading"> 
            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span> 
            {{ isEditMode ? 'Actualizar' : 'Guardar' }} 
          </button> 
          <button type="button" class="btn btn-secondary" (click)="goBack()">Cancelar</button> 
        </div> 
      </form> 
    </div> 
  </div> 
</div>